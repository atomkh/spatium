<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http//www.ultraq.net.nz/thymeleaf/Layout"
	layout:decorate="@{layout/default}">
<th:block layout:fragment="customContent">
	<div style="width:75%;">
	  <canvas id="jobDoughnut"></canvas>
	</div>
	<div style="width:75%;">
	  <canvas id="browserDoughnut"></canvas>
	</div>
	
	<div class="chart-container" style="position: relative; height:200px; width:60vw">
		<canvas id="myChart"></canvas>
	</div>
	<button type="button" id="reData">데이터 변경</button>
	<button type="button" id="addData">데이터 추가</button>
	<button type="button" id="addDataSet">데이터셋 추가</button>
	<button type="button" id="delData">데이터 삭제</button>
	<button type="button" id="addDataSet">데이터셋 삭제</button>

</th:block>

<th:block layout:fragment="customJs">
<script src="/vendors/raphael/raphael.min.js"></script>
<script src="/vendors/morris.js/morris.min.js"></script>
<script  th:inline="javascript">
	/*<![CDATA[*/
	var getByAge = /*[[${getByAge}]]*/;
	var getByJob = /*[[${getByJob}]]*/;
	var getByGender = /*[[${getByGender}]]*/;
	var btopcount0 = /*[[${btopcount0}]]*/;
	var btopcount1 = /*[[${btopcount1}]]*/;
	var btopcount2 = /*[[${btopcount2}]]*/;
	var btopcount3 = /*[[${btopcount3}]]*/;
	var btopcount4 = /*[[${btopcount4}]]*/;
	var btopname0 = /*[[${btopname0}]]*/;
	var btopname1 = /*[[${btopname1}]]*/;
	var btopname2 = /*[[${btopname2}]]*/;
	var btopname3 = /*[[${btopname3}]]*/;
	var btopname4 = /*[[${btopname4}]]*/;
	/*]]>*/

	function jobDoughnut() {
	console.log(getByAge[0].age);
	console.log(getByAge.length);
	console.log(getByAge[0].agecount);
	
	
	        var chart_doughnut_settings = {
	            type: 'doughnut',
	            tooltipFillColor: "rgba(51, 51, 51, 0.55)",
	            data: { 
	                labels: [
	                	getByAge[0].age
	                ],
	                datasets: [{
	                    data: [
	                    	getByAge[0].agecount
	                    	],
	                    backgroundColor: [
	                        "#3498DB",
	                        "#26B99A",
	                        "#9B59B6",
	                        "#E74C3C",
	                        "#BDC3C7"
	                    ],
	                    hoverBackgroundColor: [
	                        "#49A9EA",
	                        "#36CAAB",
	                        "#B370CF",
	                        "#E95E4F",
	                        "#CFD4D8"
	                    ]
	                }]
	            },
	            options: {
	                legend: false,
	                responsive: false
	            }
	        }
	        var jobdataset = chart_doughnut_settings.data.datasets
	        var arrlength = getByAge.length;
	        for (var i=0; i< arrlength; i++){
	        	jobdataset[0].data.push(getByAge[i].ageCount);
	        	jobdataset[0].data.label.push(getByAge[i].age);
			}
	        
	        jobDoughnut.update();
	
	        $('#jobDoughnut').each(function () {
	
	            var chart_element = $(this);
	            var chart_doughnut = new Chart(chart_element, chart_doughnut_settings);
	
	        });
	
	}
	
	function init_chart_doughnut() {
		
	    if (typeof (Chart) === 'undefined') { return; }
	
	    console.log('init_chart_doughnut');
   	
	    if ($('#browserDoughnut').length) {
	
	        var chart_doughnut_settings = {
	            type: 'doughnut',
	            tooltipFillColor: "rgba(51, 51, 51, 0.55)",
	            data: { 
	                labels: [
	                	getByJob[0].age
	                ],
	                datasets: [{
	                    data: [
	                    	getByJob[0].agecount
	                    	],
	                    backgroundColor: [
	                        "#3498DB",
	                        "#26B99A",
	                        "#9B59B6",
	                        "#E74C3C",
	                        "#BDC3C7"
	                    ],
	                    hoverBackgroundColor: [
	                        "#49A9EA",
	                        "#36CAAB",
	                        "#B370CF",
	                        "#E95E4F",
	                        "#CFD4D8"
	                    ]
	                }]
	            },
	            options: {
	                legend: false,
	                responsive: false
	            }
	        }
	        
	        var jobdataset = chart_doughnut_settings.data.datasets
	        var arrlength = getByJob.length;
	        for (var i=0; i< arrlength; i++){
      			 chart_doughnut_settings.data.dataset.data.push(getByJob[i].userJobCount);
      			chart_doughnut_settings.data.label.push(getByJob[i].userJob);
			}
	        
	        jobDoughnut.update();
	
	        $('#browserDoughnut').each(function () {
	
	            var chart_element = $(this);
	            var chart_doughnut = new Chart(chart_element, chart_doughnut_settings);
	
	        });
	
	    }
	}

</script>
</th:block>

</html>