<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="@{layout/default}">

<th:block layout:fragment="customContent">

	<div class="table-responsive m-t-20">
		<table class="table table-striped jambo_table bulk_action dataTable no-footer">
			<thead>
				<tr>
					<th scope="col">No.</th>
					<th scope="col">아이디</th>
					<th scope="col">공간</th>
					<th scope="col">삭제</th>
				</tr>
			</thead>
			<tbody>
				<tr th:if="${#lists.size(bookMarkList) > 0}" th:each="b : ${bookMarkList}">
					<td th:text="${b.bookMarkCode}"></td>
					<td th:text="${b.userId}"></td>
					<td th:text="${b.storeCode}"></td>
					<td th:text="${b.BookRegDate}"></td>
					
					<td>
						<button type="submit"><a th:href="@{/removeBookmark(bookMarkUserId=${b.bookMarkUserId})}">삭제</a></button>
					</td>
				</tr>

			</tbody>
		</table>
	</div>

</th:block>

<div style="text-align: right;">
       <a class="btn btn-outline-dark heart">
           <img id="heart" src="">
       </a>
   </div>

<th:block layout:fragment="customJs">
<script>
    $(document).ready(function () {

        var heart = ${heart};

        if(heart>0) {
            console.log(heartval);
            $("#heart").prop("src", "/resources/images/like2.png");
            $(".heart").prop('name',heartval)
        }
        else {
            console.log(heartval);
            $("#heart").prop("src", "/resources/images/like1.png");
            $(".heart").prop('name',heartval)
        }

        $(".heart").on("click", function () {

            var that = $(".heart");

            var sendData = {'storeCode' : '${Store.storeCode}','heart' : that.prop('name')};
            $.ajax({
                url :'/store/heart',
                type :'POST',
                data : sendData,
                success : function(data){
                    that.prop('name',data);
                    if(data==1) {
                        $('#heart').prop("src","/resources/images/like2.png");
                    }
                    else{
                        $('#heart').prop("src","/resources/images/like1.png");
                    }


                }
            });
        });
    });
</script>
</th:block>
</html>