<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http//www.ultraq.net.nz/thymeleaf/Layout"
	layout:decorate="@{layout/maindefault}">
	
	<th:block layout:fragment="customJs">
<script src="js/bootstrap.js"></script>
		<script th:inline="javascript">
			/*<![CDATA[*/
		$(function() {
			$('#insertBtn').click(function() {
				var userId = [[${session.SID}]]
				var addId = $('#addId')
				if (userId == null) {
					alert('로그인 해주세요');
					return false;
				}
				
			});
			return true;
		});

		function removePost(boardIdx, queryString) {
	
			if (confirm(boardIdx + "번 게시글을 삭제할까요?")) {
				var uri = /*[[ @{/board/removePost} ]]*/;
				var html = "";

				html += '<form name="dataForm" action="'+uri+'" method="post">';
				html += '<input type="hidden" name="boardIdx" value="'+boardIdx+'" />';

				/*[- 쿼리 스트링을 오브젝트 형태로 변환 -]*/
				queryString = new URLSearchParams(queryString);
				queryString.forEach(function(value, key) {
					if (isEmpty(value) == false) {
						html += '<input type="hidden" name="' + key + '" value="' + value + '" />';
					}
				});

				html += '</form>';

				$("body").append(html);
				document.dataForm.submit();
			}
		
		}
		/*]]>*/
	</script>
</th:block>
	
<th:block layout:fragment="customTitle">
	<title th:text="${title}"></title>
</th:block>	
	
<th:block layout:fragment="customContent">

	<div class="container " style="margin-top: 50px;">

		<h1 th:text="${Board.boardTitle}"></h1>

		<table class="table table-condensed">
			<thead>
				<tr>
					<th>게시물 번호</th>
					<td th:text="${Board.boardIdx}"></td>
					<th>카테고리</th>
					<td th:value="${Board.boardCate}" th:text="${Board.boardCateName}"></td>
					<th>조회수</th>
					<td th:text="${Board.boardLikeCnt}"></td>
					<th>추천수</th>
					<td th:text="${Board.boardHitCnt}"></td>
				</tr>
				<tr>
					<th>회원아이디</th>
					<td id="addId" th:text="${Board.boardAddId}"></td>
					<th colspan="2">제목</th>
					<td colspan="2" th:text="${Board.boardTitle}"></td>
					<th>작성날짜</th>
					<td th:text="${Board.boardAddDate}"></td>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td th:text="${Board.boardContents}"></td>
				</tr>
			</tbody>
		</table>
		<div class="text-center" th:object="${params}">
			<a th:href="|@{/modifyPost}*{makeQueryString(currentPageNo)}&boardIdx=${Board.boardIdx}|">
				<button id="insertBtn" type="submit" class="btn btn-warning">수정</button>
			</a>
			
				<button id="insertBtn" type="submit" class="btn btn-danger"
				th:onclick="removePost([[ ${Board.boardIdx} ]], [[ *{makeQueryString(currentPageNo)} ]])">삭제</button>

			<a th:href="|@{/boardList}*{makeQueryString(currentPageNo)}|">
			<button type="button" class="btn btn-primary" >게시글보기</button></a>
		</div>
	</div>
	
	
</th:block>
		<th:block layout:fragment="add-content">
		<div class="box-content">
			<div class="card-content">
				<div class="clearfix">
					<h4 class="box-title pull-left">Comment</h4>
					<!-- /.box-title -->
				</div>

				<form class="form-horizontal form-view">
					<div class="input-group margin-bottom-20">
						<input type="email" class="form-control" placeholder="">
						<div class="input-group-btn"><button type="button" class="btn waves-effect waves-light"><i class="fa fa-commenting" aria-hidden="true"></i></button></div>
						<!-- /.input-group-btn -->
					</div>
					<ul class="notice-list">
						<li>
							<span class="name">Betty Simmons</span>
							<span class="desc">There are new settings available</span>
							<span class="time">2019.03.26</span>
							<button type="button" class="btn btn-xs btn-circle"><i class="fa fa-close" aria-hidden="true"></i></button>
						</li>
						<li>
							<span class="name">Betty Kim</span>
							<span class="desc">There are new settings available</span>
							<span class="time">2019.03.15</span>
							<button type="button" class="btn btn-xs btn-circle"><i class="fa fa-close" aria-hidden="true"></i></button>
						</li>
					</ul>
				</form>
			</div>
			<!-- /.card-content -->
		</div>
		<!-- /.box-content -->
	</th:block>

</html>