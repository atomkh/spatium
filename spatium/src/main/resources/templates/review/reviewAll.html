<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http//www.ultraq.net.nz/thymeleaf/Layout"
	layout:decorate="@{layout/default}">
<th:block layout:fragment="customCss">
<style type="text/css">
	/* details {width: 500px;} */
	details > summary {padding: 3px 10px;}
	details > summary::-webkit-details-marker {display: none}
	details > summary::marker {display: none}
	
	#reviewTable th {padding : 5px;}
	#reviewTable td {padding : 5px;}
	
</style>
</th:block>

<th:block layout:fragment="customContent">
	 
	<div class="modal fade" id="deleteCheck">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h4 class="modal-title">리뷰 삭제 확인</h4>
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	      </div>
	      <div class="modal-body" style="font-size:15px;">
	      	선택하신 <b><span id="selectReviews" style="font-size:25px; color:red"></span></b>개의 리뷰를 삭제하시겠습니까?<br>
	      	(삭제를 하시면 되돌릴 수 없습니다.)
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">취소</button>
	        <button type="button" class="btn btn-danger" id="deleteReview">삭제하기</button>
	      </div>
	    </div><!-- /.modal-content -->
	  </div><!-- /.modal-dialog -->
	</div><!-- /.modal -->

	<div class="col-md-12 col-sm-12  ">
		<div class="x_panel">
			<div class="x_title">
				<h2>
					리뷰 전체 목록 <small>관리자 페이지</small>
				</h2>
				<div class="clearfix"></div>
			</div>
			<div class="x_content">
				<button type="button" style="float:right;" class="btn btn-success btn-sm" id="deleteBtn">선택 삭제하기</button>
				<span id="notice" style="float:right; padding:3px 0; color:#d9534f"></span>
				<form action="/searchReview" method="post">
					<select name="sk">
						<option value="작성자">작성자</option>
						<option value="리뷰제목">리뷰제목</option>
						<option value="리뷰코드">리뷰코드</option>
						<option value="예약코드">예약코드</option>
						<option value="방코드">방 코드</option>
					</select>
					<input type="text" name="sv" placeholder="검색어를 입력해주세요"/>
					<button type="submit">검색</button>
				</form>
				
			<form id="deletemulti" action="/deleteReview" method="post">
				<div class="table-responsive">
					<table class="table table-striped jambo_table bulk_action" id="reviewTable" style="padding: 0px;">
						<thead>
							<tr class="headings">
								<th><input type="checkbox" id="check-all" class="flat">
								</th>
								<th class="column-title">리뷰 코드</th>
								<th class="column-title">예약 코드</th>
								<th class="column-title">방 코드</th>
								<th class="column-title">리뷰 제목</th>
								<th class="column-title">작성자</th>
								<th class="column-title">등록일</th>
								<th class="column-title">수정일</th>
								<th class="column-title">추천수</th>
								<th class="column-title">리뷰<br>타입
								</th>
								<th class="column-title">적립<br>포인트
								</th>
								<th class="column-title">전시<br>상태</th>
								<th class="column-title">청결도</th>
								<th class="column-title">서비스</th>
								<th class="column-title">화장실</th>
								<th class="column-title">시설</th>
								<th class="column-title">분위기</th>
								<th class="column-title no-link last">종합</th>
								<th class="bulk-actions" colspan="18"><a class="antoo"
									style="color: #fff; font-weight: 500;"> 선택한 리뷰 삭제하기 ( <span
										class="action-cnt"> </span> ) <i class="fa fa-chevron-down"></i></a>
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="even pointer" th:if="${#lists.size(allReview) > 0}"
								th:each="ar : ${allReview}">
								<td class="a-center "><input type="checkbox" class="flat"
									name="table_records" th:value="${ar.reviewCode}"></td>
								<td class=" " th:text="${ar.get('reviewCode')}"></td>
								<td class=" " th:text="${ar.get('reviewSpaceRsv')}"></td>
								<td class=" " th:text="${ar.get('reviewSpaceCode') }"></td>
								<td class=" "><details style="width:200px;">
										<summary th:text="${ar.get('reviewTitle')}"></summary>
										<span th:text="${ar.get('reviewContents')}"> </span>
									</details></td>
								<td class=" " th:text="${ar.get('reviewAddId')}"></td>
								<td class=" " th:text="${ar.get('reviewAddDate')}"></td>
								<td class=" " th:text="${ar.get('reviewUpDate')}"></td>
								<td class=" " th:text="${ar.get('reviewLikeCnt')}"></td>
								<td class=" " th:text="${ar.get('reviewType')}"></td>
								<td class=" " th:text="${ar.get('reviewPoint')}"></td>
								<td class=" " th:text="${ar.get('reviewDisplay')}"></td>
								<td class=" " th:text="${ar.get('reviewClean')}"></td>
								<td class=" " th:text="${ar.get('reviewService')}"></td>
								<td class=" " th:text="${ar.get('reviewRestroom')}"></td>
								<td class=" " th:text="${ar.get('reviewFacility')}"></td>
								<td class=" " th:text="${ar.get('reviewAmbience')}"></td>
								<td class=" last" th:text="${ar.get('reviewScore')}"></td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td colspan="18" style="text-align:center;">
									<a th:href="@{/reviewAll}">[맨처음]</a>
									<a th:if="${currentPage > 1}" th:href="@{/reviewAll(currentPage = ${currentPage - 1 })}">[이전]</a>
									<th:block th:each="num : ${#numbers.sequence(startPageNum,endPageNum)}">
										<a th:unless="${currentPage == num}" th:href="@{/reviewAll(currentPage = ${num})}" th:text="${'[' + num + ']'}"></a>
										<span th:if="${currentPage == num}" th:text="${'[' + num + ']'}"></span>
									</th:block>
									<a th:if="${currentPage < lastPage}"th:href="@{/reviewAll(currentPage = ${currentPage + 1 })}">[다음]</a>
									<a th:href="@{/reviewAll(currentPage = ${lastPage})}">[맨마지막]</a>
								</td>
							</tr>
						</tfoot>
					</table>
				</div>
					</form>

			</div>
		</div>
	</div>
	
</th:block>
<th:block layout:fragment="customJs">
<script  th:inline="javascript">
	
	$('#deleteBtn').click(function(){
		var selected = $('.flat:checked').length;
		console.log(selected);
		if (selected > 0) {
			$('#notice').text('');
			$('#deleteCheck').modal();
			$('#selectReviews').text(selected);
			
			
			$('#deleteReview').click(function(){
					$('#deletemulti').submit();
			});
		}else{
			$('#notice').text('삭제할 리뷰를 선택하세요.');
		}
	});
</script>
</th:block>

</html>